---
import { LanguagesDropdown } from "@/i18n/ui";
import { getLangFromUrl } from "@/i18n/utils";

const path = Astro.url.pathname.split("/").slice(2).join("/");

const currentLang = getLangFromUrl(Astro.url);
---

<div>
  <select
    class="px-2 block w-full rounded-lg text-base bg-transparent focus:border-none disabled:opacity-50 disabled:pointer-events-none border-transparent text-white focus:ring-none focus:outline-none"
    onchange="location = this.value;"
  >
    {
      LanguagesDropdown.map(({ value, label, flag }) => (
        <option value={`/${value}/${path}`} selected={value === currentLang} class="bg-neutral-800 text-white">
          {flag}
          {label}
        </option>
      ))
    }
  </select>
</div>
